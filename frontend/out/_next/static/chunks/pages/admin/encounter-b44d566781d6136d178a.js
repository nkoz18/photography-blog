(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{2155:function(e,t,n){"use strict";var o=n(5893),r=n(7294),a=n(3850),s=n(4247);t.Z=function(e){var t=e.width,n=void 0===t?400:t,i=e.height,l=void 0===i?300:i,c=e.mode,d=void 0===c?"main":c,u=e.text,p=void 0===u?"":u,f=e.roughness,g=void 0===f?1.5:f,m=e.className,h=void 0===m?"":m,x=e.onClick,b=e.disabled,v=void 0!==b&&b,y=e.children,j=(0,r.useRef)(null),k=(0,r.useState)(!1),w=k[0],S=k[1];if((0,r.useEffect)((function(){S(!0)}),[]),(0,r.useEffect)((function(){if(w&&j.current){var e=j.current,t=s.default.canvas(e),o=e.getContext("2d"),r=window.devicePixelRatio||1;switch(e.width=n*r,e.height=l*r,e.style.width="".concat(n,"px"),e.style.height="".concat(l,"px"),o.scale(r,r),o.clearRect(0,0,n,l),d){case"main":t.rectangle(10,10,n-20,l-20,{fill:"#ff007f",fillStyle:"solid",stroke:"#ff007f",strokeWidth:3,roughness:2.2,bowing:3});break;case"yes-button":case"no-button":case"option-button":t.rectangle(5,5,n-10,l-10,{fill:"#ffffff",fillStyle:"solid",stroke:"#ff007f",strokeWidth:2,roughness:1.8,bowing:2});break;case"close-button":t.rectangle(2,2,n-4,l-4,{fill:"#ffffff",fillStyle:"solid",stroke:"#ff007f",strokeWidth:2,roughness:2,bowing:3});break;default:t.rectangle(5,5,n-10,l-10,{fill:"#ff007f",fillStyle:"solid",stroke:"#ff007f",strokeWidth:2,roughness:g,bowing:2})}}}),[n,l,d,g,w]),!w)return(0,o.jsx)("div",{className:"rough-canvas-placeholder ".concat(h),style:{width:"".concat(n,"px"),height:"".concat(l,"px")}});var P=(0,o.jsx)("canvas",{ref:j,className:"rough-canvas ".concat(h," ").concat("main"===d?"":"rough-canvas-button"),onClick:x,style:{cursor:x&&!v?"pointer":"default",opacity:v?.6:1,display:"block"}});return"main"!==d&&x?(0,o.jsxs)(a.E.div,{className:"rough-canvas-container ".concat(h),style:{position:"relative",display:"inline-block"},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x,children:[P,(p||y)&&(0,o.jsx)("div",{className:"rough-canvas-text",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontFamily:"Barriecito, cursive",color:"main"===d?"#ffffff":"#ff007f",fontSize:"option-button"===d?"24px":"yes-button"===d||"no-button"===d?"34px":"24px",fontWeight:"option-button"===d?"bolder":"normal",textAlign:"center",textTransform:"option-button"===d?"none":"uppercase",letterSpacing:"option-button"===d?"2.5px":"0",pointerEvents:"none",userSelect:"none"},children:p||y})]}):P}},5027:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var o=n(5893),r=n(6156),a=n(7757),s=n.n(a),i=n(2137),l=n(5988),c=n(7294),d=n(3850),u=n(4059),p=n(883),f=n(2155),g=n(27),m=n(1296),h=n.n(m);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.value,n=e.onChange,r=e.onResolvedAddressChange,a=e.placeholder,l=void 0===a?"Enter address or location":a,d=e.style,u=void 0===d?{}:d,f=e.validationError,m=void 0===f?null:f,x=(0,c.useState)(t||""),v=x[0],y=x[1],j=(0,c.useState)([]),k=j[0],w=j[1],S=(0,c.useState)(!1),P=S[0],O=S[1],N=(0,c.useState)(null),C=N[0],E=N[1],A=(0,c.useRef)(new Map);(0,c.useEffect)((function(){y(t||"")}),[t]);var R=(0,c.useRef)(h()(function(){var e=(0,i.Z)(s().mark((function e(t){var n,o,r,a,i,l,c,d,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\ud83d\udd0d [Places] Starting prediction fetch for input:",'"'.concat(t,'"')),t&&!(t.length<3)){e.next=5;break}return console.log("\ud83d\udd0d [Places] Input too short, clearing predictions. Length:",null===t||void 0===t?void 0:t.length),w([]),e.abrupt("return");case 5:if(!A.current.has(t)){e.next=12;break}return console.log("\ud83d\udd0d [Places] Found cached result for:",'"'.concat(t,'"')),n=A.current.get(t),console.log("\ud83d\udd0d [Places] Cached predictions:",n),w(n),O(!1),e.abrupt("return");case 12:return e.prev=12,console.log("\ud83d\udd0d [Places] Making Strapi-proxied Google Places API call for:",'"'.concat(t,'"')),r=(0,p.p)(),e.next=17,fetch("".concat(r,"/api/places/autocomplete?input=").concat(encodeURIComponent(t)));case 17:if((a=e.sent).ok){e.next=20;break}throw new Error("HTTP error! status: ".concat(a.status));case 20:return e.next=22,a.json();case 22:i=e.sent,l=i.slice(0,5),console.log("\ud83d\udd0d [Places] Strapi proxy response:",l),c={status:"OK",predictions:l},console.log("\ud83d\udd0d [Places] API response data:",c),console.log("\ud83d\udd0d [Places] Response status:",c.status),console.log("\ud83d\udd0d [Places] Predictions count:",(null===(o=c.predictions)||void 0===o?void 0:o.length)||0),"OK"===c.status&&c.predictions?(d=c.predictions.slice(0,5),A.current.set(t,d),console.log("\ud83d\udd0d [Places] Cached result for future use"),A.current.size>30&&(u=A.current.keys().next().value,A.current.delete(u),console.log("\ud83d\udd0d [Places] Cache cleanup: removed oldest entry")),console.log("\ud83d\udd0d [Places] Setting predictions in state (limited to 5):",d),w(d)):(console.log("\ud83d\udd0d [Places] No valid predictions in response, clearing"),w([])),e.next=37;break;case 32:e.prev=32,e.t0=e.catch(12),console.error("\ud83d\udd0d [Places] ERROR fetching predictions:",e.t0),console.error("\ud83d\udd0d [Places] Error details:",{name:e.t0.name,message:e.t0.message,stack:e.t0.stack}),w([]);case 37:console.log("\ud83d\udd0d [Places] Finished prediction fetch, setting loading to false"),O(!1);case 39:case"end":return e.stop()}}),e,null,[[12,32]])})));return function(t){return e.apply(this,arguments)}}(),300)).current,I=function(e){console.log("\ud83d\udd0d [Input] Input changed:",'"'.concat(e,'"'),"Length:",null===e||void 0===e?void 0:e.length),y(e),null===n||void 0===n||n(e),C&&(console.log("\ud83d\udd0d [Input] Clearing resolved address because user is typing"),E(null),null===r||void 0===r||r(null)),e&&e.length>=3?(console.log("\ud83d\udd0d [Input] Input length >= 3, starting prediction fetch..."),O(!0),R(e)):(console.log("\ud83d\udd0d [Input] Input too short, clearing predictions and stopping loading"),w([]),O(!1))},z=function(){var e=(0,i.Z)(s().mark((function e(t){var o,a,i,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\udd0d [Selection] User selected prediction:",t),y(t.description),null===n||void 0===n||n(t.description),w([]),console.log("\ud83d\udd0d [Selection] Updated query and cleared predictions"),e.prev=5,console.log("\ud83d\udd0d [Selection] Starting place details fetch via Strapi proxy"),console.log("\ud83d\udd0d [Selection] Place ID:",t.place_id),o=(0,p.p)(),e.next=11,fetch("".concat(o,"/api/places/details?place_id=").concat(encodeURIComponent(t.place_id)));case 11:if((a=e.sent).ok){e.next=14;break}throw new Error("HTTP error! status: ".concat(a.status));case 14:return e.next=16,a.json();case 16:i=e.sent,console.log("\ud83d\udd0d [Selection] Strapi proxy details response:",i),l={status:"OK",result:i},console.log("\ud83d\udd0d [Selection] Place details response:",l),console.log("\ud83d\udd0d [Selection] Response status:",l.status),console.log("\ud83d\udd0d [Selection] Result data:",l.result),"OK"===l.status&&l.result?(c={formatted_address:l.result.formatted_address,name:l.result.name,lat:l.result.geometry.location.lat,lng:l.result.geometry.location.lng,placeData:l.result},console.log("\ud83d\udd0d [Selection] Created comprehensive resolved address object:",c),console.log("\ud83d\udd0d [Selection] Full Places API data:",l.result),E(c),null===r||void 0===r||r(c),console.log("\ud83d\udd0d [Selection] Updated state with complete resolved address")):console.log("\ud83d\udd0d [Selection] No valid result in place details response"),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(5),console.error("\ud83d\udd0d [Selection] ERROR fetching place details:",e.t0),console.error("\ud83d\udd0d [Selection] Error details:",{name:e.t0.name,message:e.t0.message,stack:e.t0.stack});case 29:case"end":return e.stop()}}),e,null,[[5,25]])})));return function(t){return e.apply(this,arguments)}}();return console.log("\ud83d\udd0d [Render] Component rendering with state:"),console.log("  - query:",'"'.concat(v,'"')),console.log("  - predictions.length:",k.length),console.log("  - predictions:",k),console.log("  - isLoading:",P),console.log("  - resolvedAddress:",C),console.log("  - validationError:",m),(0,o.jsx)("div",{style:{position:"relative",width:"100%"},children:(0,o.jsxs)(g.h,{value:v,onChange:z,children:[(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(g.h.Input,{value:v,onChange:function(e){return I(e.target.value)},placeholder:l,style:b({width:"100%",padding:"1rem",fontSize:"1rem",border:"2px solid ".concat(m?"#ff6b6b":"#ff007f"),borderRadius:"0",background:"#222",color:"#fff",outline:"none",boxSizing:"border-box",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},u)}),P&&(0,o.jsx)("div",{style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",fontSize:"0.8rem",color:"#888"},children:"..."})]}),k.length>0&&(0,o.jsxs)(g.h.Options,{style:{position:"absolute",top:"100%",left:0,right:0,background:"#222",border:"2px solid #ff007f",borderTop:"none",borderRadius:"0",maxHeight:"none",overflowY:"visible",zIndex:1e3,listStyle:"none",margin:0,padding:0},children:[k.map((function(e){return(0,o.jsx)(g.h.Option,{value:e,style:{cursor:"pointer"},children:function(t){var n,r,a=t.active;return(0,o.jsxs)("div",{style:{padding:"0.75rem 1rem",background:a?"#ff007f":"transparent",color:a?"#fff":"#ccc",borderBottom:"1px solid #333"},children:[(0,o.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:a?"bold":"normal"},children:(null===(n=e.structured_formatting)||void 0===n?void 0:n.main_text)||e.description}),(null===(r=e.structured_formatting)||void 0===r?void 0:r.secondary_text)&&(0,o.jsx)("div",{style:{fontSize:"0.8rem",opacity:.8},children:e.structured_formatting.secondary_text})]})}},e.place_id)})),0===k.length&&v.length>=3&&!P&&(0,o.jsx)("div",{style:{padding:"0.75rem 1rem",color:"#888",fontSize:"0.9rem",fontStyle:"italic"},children:"No matches, keep typing or enter address manually"})]})]})})};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(){var e=(0,c.useState)("create"),t=e[0],n=e[1],a=(0,c.useState)(null),g=(a[0],a[1]),m=(0,c.useState)(""),h=m[0],x=m[1],b=(0,c.useState)(""),y=b[0],k=b[1],w=(0,c.useState)(""),S=w[0],P=w[1],O=(0,c.useState)(""),N=O[0],C=O[1],E=(0,c.useState)({customAddress:"",name:"",email:"",instagram:"",phone:""}),A=E[0],R=E[1],I=(0,c.useState)({}),z=I[0],F=I[1],B=(0,c.useState)(null),_=B[0],H=B[1];(0,c.useRef)(null);(0,c.useEffect)((function(){var e=localStorage.getItem("encounterFormData");if(e)try{var t=JSON.parse(e);R(t)}catch(n){console.warn("Failed to restore form data:",n)}}),[]),(0,c.useEffect)((function(){localStorage.setItem("encounterFormData",JSON.stringify(A))}),[A]);var T=function(e,t){if("phone"===e){var n=(t=t.replace(/[^0-9\s\-\(\)\+]/g,"")).replace(/[^0-9]/g,"");if(n.length>15){for(var o=n.substring(0,15),a="",s=0,i=0;i<t.length&&s<o.length;i++){var l=t[i];/[0-9]/.test(l)?(a+=o[s],s++):a+=l}t=a}}"instagram"===e&&t.startsWith("@")&&(t=t.substring(1)),R((function(n){return j(j({},n),{},(0,r.Z)({},e,t))})),z[e]&&F((function(t){return j(j({},t),{},(0,r.Z)({},e,null))}))},W=function(e){if(!e)return!1;return/^(?!.*\.\.)(?!.*\.$)[^\.][a-zA-Z0-9._]{0,29}$/.test(e)},D=function(e,t){if(!t)return null;switch(e){case"email":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:"Please enter a valid email address";case"phone":var n=t.replace(/[^0-9]/g,"");return console.log('\ud83d\udd0d [Phone Validation] Original: "'.concat(t,'", Clean: "').concat(n,'", Length: ').concat(n.length)),n.length<10?(console.log("\ud83d\udd0d [Phone Validation] Too short: ".concat(n.length," < 10")),"Phone number must have at least 10 digits"):n.length>15?(console.log("\ud83d\udd0d [Phone Validation] Too long: ".concat(n.length," > 15")),"Phone number is too long"):(console.log("\ud83d\udd0d [Phone Validation] Valid phone number"),null);case"instagram":return/^(?!.*\.\.)(?!.*\.$)[^\.][a-zA-Z0-9._]{0,29}$/.test(t)?null:"Invalid Instagram handle format (letters, numbers, periods, underscores only, 1-30 chars)";default:return null}},Z=function(e){var t=A[e];console.log('\ud83d\udd0d [Field Blur] Field: "'.concat(e,'", Value: "').concat(t,'"'));var n=D(e,t);console.log('\ud83d\udd0d [Field Blur] Validation result for "'.concat(e,'": ').concat(n||"No error")),F((function(t){return j(j({},t),{},(0,r.Z)({},e,n))}))},M=function(){var e={};return Object.keys(A).forEach((function(t){if(A[t]&&["email","phone","instagram"].includes(t)){var n=D(t,A[t]);n&&(e[t]=n)}})),F(e),0===Object.keys(e).length},L="https://silkytruth.com/x/".concat(S),K=new URLSearchParams;A.name&&A.name.trim()&&K.append("name",A.name.trim()),A.email&&A.email.trim()&&K.append("email",A.email.trim()),A.instagram&&A.instagram.trim()&&K.append("instagram",A.instagram.trim()),A.phone&&A.phone.trim()&&K.append("phone",A.phone.trim());var U=K.toString()?"".concat(L,"?").concat(K.toString()):L;return(0,o.jsxs)("div",{style:{height:"100vh",background:"#000",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",fontFamily:'"IBM Plex Mono", monospace',overflow:"hidden",boxSizing:"border-box"},className:"jsx-630787847",children:["create"===t&&(0,o.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{textAlign:"center",maxWidth:"400px"},children:[(0,o.jsxs)("div",{style:{marginBottom:"1rem",width:"100%"},className:"jsx-630787847",children:[(0,o.jsx)("p",{style:{color:"#ccc",marginBottom:"1rem",fontSize:"0.9rem"},className:"jsx-630787847",children:"Fill out any details you want to pre-populate (all optional):"}),(0,o.jsx)("div",{style:{marginBottom:"1rem"},className:"jsx-630787847",children:(0,o.jsx)(v,{value:A.customAddress,onChange:function(e){return T("customAddress",e)},onResolvedAddressChange:H,placeholder:"Address or location (e.g., 'Powell's Books', '123 Main St')"})}),(0,o.jsx)("div",{style:{marginBottom:"1rem"},className:"jsx-630787847",children:(0,o.jsx)("input",{type:"text",autoComplete:"name",value:A.name,onChange:function(e){return T("name",e.target.value)},placeholder:"Person's name",style:{width:"100%",padding:"1rem",fontSize:"1rem",border:"2px solid #ff007f",borderRadius:"0",background:"#222",color:"#fff",outline:"none",boxSizing:"border-box",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",touchAction:"manipulation",minHeight:"44px"},className:"jsx-630787847"})}),(0,o.jsxs)("div",{style:{marginBottom:"1rem",position:"relative"},className:"jsx-630787847",children:[(0,o.jsx)("input",{type:"text",autoComplete:"username",value:A.instagram,onChange:function(e){return T("instagram",e.target.value)},onBlur:function(){return Z("instagram")},placeholder:"Instagram handle (without @)",style:{width:"100%",padding:"1rem",paddingRight:W(A.instagram)?"60px":"1rem",fontSize:"1rem",border:"2px solid ".concat(z.instagram?"#FFE200":"#ff007f"),borderRadius:"0",background:"#222",color:"#fff",outline:"none",boxSizing:"border-box",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",touchAction:"manipulation",minHeight:"44px"},className:"jsx-630787847"}),W(A.instagram)&&(0,o.jsx)("button",{type:"button",onClick:function(){return window.open("https://instagram.com/".concat(A.instagram),"_blank","noopener,noreferrer")},style:{position:"absolute",right:"2px",top:"2px",bottom:"2px",width:"54px",background:"#ff007f",border:"none",borderRadius:"0",color:"#fff",cursor:"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",lineHeight:"1",fontFamily:"system-ui, -apple-system, sans-serif",paddingBottom:"6px"},onMouseEnter:function(e){return e.target.style.backgroundColor="#e6006b"},onMouseLeave:function(e){return e.target.style.backgroundColor="#ff007f"},title:"Open @".concat(A.instagram," on Instagram"),className:"jsx-630787847",children:"\ud83d\udcf7"})]}),(0,o.jsx)("div",{style:{marginBottom:"1rem"},className:"jsx-630787847",children:(0,o.jsx)("input",{type:"tel",inputMode:"tel",value:A.phone,onChange:function(e){return T("phone",e.target.value)},onBlur:function(){return Z("phone")},placeholder:"Phone number",style:{width:"100%",padding:"1rem",fontSize:"1rem",border:"2px solid ".concat(z.phone?"#FFE200":"#ff007f"),borderRadius:"0",background:"#222",color:"#fff",outline:"none",boxSizing:"border-box",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",touchAction:"manipulation",minHeight:"44px"},className:"jsx-630787847"})}),(0,o.jsx)("div",{style:{marginBottom:"1rem"},className:"jsx-630787847",children:(0,o.jsx)("input",{type:"email",inputMode:"email",autoComplete:"email",value:A.email,onChange:function(e){return T("email",e.target.value)},onBlur:function(){return Z("email")},placeholder:"Email address",style:{width:"100%",padding:"1rem",fontSize:"1rem",border:"2px solid ".concat(z.email?"#FFE200":"#ff007f"),borderRadius:"0",background:"#222",color:"#fff",outline:"none",boxSizing:"border-box",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",touchAction:"manipulation",minHeight:"44px"},className:"jsx-630787847"})})]}),(0,o.jsx)("div",{style:{minHeight:"120px",marginBottom:"1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",width:"100%"},className:"jsx-630787847",children:Object.keys(z).filter((function(e){return z[e]})).length>0&&(0,o.jsx)("div",{style:{width:"100%",background:"#222",border:"2px solid #FFE200",padding:"0.75rem",boxSizing:"border-box"},className:"jsx-630787847",children:Object.keys(z).filter((function(e){return z[e]})).map((function(e,t){return(0,o.jsx)("div",{style:{color:"#FFE200",fontSize:"0.75rem",textAlign:"center",lineHeight:"1.3",marginBottom:t<Object.keys(z).filter((function(e){return z[e]})).length-1?"0.5rem":"0",fontFamily:'"IBM Plex Mono", monospace'},className:"jsx-630787847",children:z[e]},e)}))})}),(0,o.jsxs)("div",{style:{position:"relative",width:"100%",maxWidth:"400px"},className:"jsx-630787847",children:[(0,o.jsx)(f.Z,{width:400,height:80,options:{roughness:1.5,strokeWidth:3,stroke:"#ff007f",fill:"#ff007f",fillStyle:"solid"},shapes:[{type:"rectangle",x:0,y:0,width:400,height:80}],style:{position:"absolute",top:0,left:0,pointerEvents:"none"}}),(0,o.jsx)(d.E.button,{whileHover:{scale:Object.keys(z).filter((function(e){return z[e]})).length>0?1:1.05},whileTap:{scale:Object.keys(z).filter((function(e){return z[e]})).length>0?1:.95},onClick:function(){navigator.geolocation?(n("loading"),C(""),navigator.geolocation.getCurrentPosition(function(){var e=(0,i.Z)(s().mark((function e(t){var o,r,a,i,l,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M()){e.next=4;break}return n("create"),C("Please fix validation errors before creating encounter"),e.abrupt("return");case 4:return o=t.coords,r=o.latitude,a=o.longitude,g({lat:r,lng:a}),e.prev=6,i=(0,p.p)(),l=_?{lat:_.lat,lng:_.lng,manualAddress:_.formatted_address,placeName:_.name,placeData:_.placeData,contactData:{name:A.name||null,email:A.email||null,instagram:A.instagram||null,phone:A.phone?A.phone.replace(/[^0-9+]/g,""):null}}:{lat:r,lng:a,manualAddress:A.customAddress||null,contactData:{name:A.name||null,email:A.email||null,instagram:A.instagram||null,phone:A.phone?A.phone.replace(/[^0-9+]/g,""):null}},e.next=11,fetch("".concat(i,"/api/photo-encounters/coords"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});case 11:if((c=e.sent).ok){e.next=14;break}throw new Error("HTTP error! status: ".concat(c.status));case 14:return e.next=16,c.json();case 16:d=e.sent,P(d.slug),x(d.address),k(d.placeName),n("qr"),localStorage.removeItem("encounterFormData"),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(6),C("Failed to create encounter: ".concat(e.t0.message)),n("create");case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){C("Location error: ".concat(e.message)),n("create")}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})):C("Geolocation is not supported by this browser")},disabled:Object.keys(z).filter((function(e){return z[e]})).length>0,style:{position:"absolute",top:0,left:0,width:"400px",height:"80px",fontSize:"1.5rem",background:"transparent",color:Object.keys(z).filter((function(e){return z[e]})).length>0?"#666":"#fff",border:"none",cursor:Object.keys(z).filter((function(e){return z[e]})).length>0?"not-allowed":"pointer",zIndex:1,opacity:Object.keys(z).filter((function(e){return z[e]})).length>0?.5:1,display:"flex",alignItems:"center",justifyContent:"center",margin:0,padding:0,fontFamily:'"Kirang Haerang", cursive'},children:(0,o.jsx)("span",{style:{fontFamily:'"Kirang Haerang", cursive !important'},className:"jsx-630787847",children:"Create Encounter"})})]}),N&&(0,o.jsx)("div",{style:{color:"#ff6b6b",marginTop:"1rem",padding:"1rem",background:"#222",borderRadius:"8px",border:"1px solid #ff6b6b"},className:"jsx-630787847",children:N})]}),"loading"===t&&(0,o.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1},style:{textAlign:"center"},children:[(0,o.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},className:"jsx-630787847",children:"\ud83c\udf0d"}),(0,o.jsx)("h2",{style:{color:"#ff007f"},className:"jsx-630787847",children:"Getting location..."}),(0,o.jsx)("div",{style:{width:"50px",height:"50px",border:"3px solid #ff007f",borderTop:"3px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"2rem auto"},className:"jsx-630787847"})]}),"qr"===t&&(0,o.jsxs)(d.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},style:{textAlign:"center",maxWidth:"500px"},children:[(0,o.jsx)("h2",{style:{color:"#ff007f",marginBottom:"1rem"},className:"jsx-630787847",children:"QR Code Ready!"}),(0,o.jsx)("div",{style:{background:"#fff",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",display:"inline-block"},className:"jsx-630787847",children:(0,o.jsx)(u.ZP,{value:U,size:300,level:"M",includeMargin:!0})}),(0,o.jsxs)("div",{style:{background:"#222",padding:"1.5rem",borderRadius:"8px",marginBottom:"2rem",textAlign:"left"},className:"jsx-630787847",children:[y?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{marginBottom:"0.5rem"},className:"jsx-630787847",children:[(0,o.jsx)("strong",{className:"jsx-630787847",children:"Place:"})," ",y]}),(0,o.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",color:"#ccc"},className:"jsx-630787847",children:[(0,o.jsx)("strong",{className:"jsx-630787847",children:"Address:"})," ",h]})]}):(0,o.jsxs)("div",{style:{marginBottom:"0.5rem"},className:"jsx-630787847",children:[(0,o.jsx)("strong",{className:"jsx-630787847",children:"Location:"})," ",h]}),(0,o.jsxs)("div",{style:{marginBottom:"0.5rem"},className:"jsx-630787847",children:[(0,o.jsx)("strong",{className:"jsx-630787847",children:"URL:"})," ",(0,o.jsx)("span",{style:{fontSize:"0.9rem",wordBreak:"break-all"},className:"jsx-630787847",children:U})]})]}),(0,o.jsxs)("div",{style:{position:"relative",width:"100%",maxWidth:"400px"},className:"jsx-630787847",children:[(0,o.jsx)(f.Z,{width:400,height:60,options:{roughness:1.5,strokeWidth:2,stroke:"#ff007f",fill:"#333",fillStyle:"solid"},shapes:[{type:"rectangle",x:0,y:0,width:400,height:60}],style:{position:"absolute",top:0,left:0,pointerEvents:"none"}}),(0,o.jsx)(d.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:function(){n("create"),g(null),x(""),k(""),P(""),C(""),R({customAddress:"",name:"",email:"",instagram:"",phone:""}),F({}),H(null),localStorage.removeItem("encounterFormData")},style:{position:"absolute",top:0,left:0,width:"400px",height:"60px",fontSize:"1.5rem",background:"transparent",color:"#fff",border:"none",cursor:"pointer",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",margin:0,padding:0,fontFamily:'"Kirang Haerang", cursive'},children:(0,o.jsx)("span",{style:{fontFamily:'"Kirang Haerang", cursive !important'},className:"jsx-630787847",children:"Create Another"})})]})]}),(0,o.jsx)(l.default,{id:"630787847",children:["@-webkit-keyframes spin-jsx-630787847{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes spin-jsx-630787847{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]})]})}},1270:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/encounter",function(){return n(5027)}])}},function(e){e.O(0,[247,850,855,774,888,179],(function(){return t=1270,e(e.s=t);var t}));var t=e.O();_N_E=t}]);